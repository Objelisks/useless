include ../common/head
include ../common/header
include ../common/nav
include ../common/admin

- article = article || {};

doctype html
html
  head
    +headstuff
  body
    .container
      +nav
      section.content
        +header('edit mode blog version')
        form(action='/blog', method='post')
          section.container
            section.column
              label(for='title'): strong title
              br
              input(name='title', type='text', value=article.title || '')
            section.column
              label(for='id'): strong slug
              br
              input(name='id', type='text' value=article.id || '')
          section
            label(for='body'): strong content
            br
            textarea(id='articleBody', name='body', cols='60', rows='10') #{article.body || ''}
          input(type='submit', value='submit')
      section.preview.narrow#previewArea
    script(src='/scripts/marked.js')
    script.
      document.addEventListener('DOMContentLoaded', () => {
        document.getElementById('articleBody').addEventListener('input', (e) => {
          document.getElementById('previewArea').innerHTML = marked(e.target.value);
        });
      });